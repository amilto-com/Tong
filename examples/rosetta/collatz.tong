// Rosetta Code: Collatz sequence
// Avoid floating division by using integer halving
fn half(n) {
    // integer division by 2 via subtraction
    var h = 0
    var m = n
    while m > 0 {
        m = m - 2
        if m >= 0 { h = h + 1 }
    }
    return h
}

fn collatz(n) {
    var n = n
    while n != 1 {
        print(n)
        if n % 2 == 0 {
            n = half(n)
        } else {
            n = 3*n + 1
        }
    }
    print(1)
}

collatz(27)
